<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Panel - WellMed</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/responsive.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar">
    <div class="nav-container">
      <div class="nav-logo" style="display:flex;align-items:center;gap:10px;">
        <a href="index.html" style="display:flex;align-items:center;gap:10px;">
          <img src="C:\Users\Rishi\Downloads\WhatsApp Image 2026-01-17 at 12.08.15 PM.jpeg" alt="Wellmed logo" style="height:38px;width:38px;border-radius:6px;object-fit:cover;">
          <span>WELL<span style="color: rgb(194, 0, 0);">MED</span> Admin</span>
        </a>
      </div>
      <ul class="nav-menu">
        <li class="nav-item">
          <button class="nav-link" onclick="logout()">Logout</button>
        </li>
      </ul>
    </div>
  </nav>

  <div class="admin-container">
    <!-- Sidebar -->
    <aside class="admin-sidebar">
      <div class="sidebar-logo" style="padding:16px; text-align:center;">
        <img src="C:\Users\Rishi\Downloads\WhatsApp Image 2026-01-17 at 12.08.15 PM.jpeg" alt="Wellmed logo" style="max-width: 120px; border-radius: 6px;" />
      </div>
      <ul class="admin-menu">
        <li><a href="#" class="admin-link active" onclick="showSection('dashboard')"><img src="https://cdn-icons-png.flaticon.com/128/1828/1828673.png" alt="Dashboard Icon" style="height:16px;width:16px;vertical-align:middle;margin-right:6px;"> Dashboard</a></li>
        <li><a href="#" class="admin-link" onclick="showSection('products')"><img src ="https://cdn-icons-png.flaticon.com/128/9280/9280771.png" alt="Products Icon" style="height:16px;width:16px;vertical-align:middle;margin-right:6px;"> Products</a></li>
        <li><a href="#" class="admin-link" onclick="showSection('orders')"><img src="https://cdn-icons-png.flaticon.com/128/3500/3500833.png" alt="Orders Icon" style="height:16px;width:16px;vertical-align:middle;margin-right:6px;"> Orders</a></li>
      </ul>
    </aside>

    <!-- Main Content -->
    <main class="admin-content">
      <!-- Dashboard Section -->
      <section id="dashboard" class="admin-section active">
        <h2>Dashboard</h2>
        <div class="dashboard-stats">
          <div class="stat-card">
            <h3>Total Products</h3>
            <p id="totalProducts" class="stat-number">0</p>
          </div>
          <div class="stat-card">
            <h3>Total Orders</h3>
            <p id="totalOrders" class="stat-number">0</p>
          </div>
          <div class="stat-card">
            <h3>Low Stock Items</h3>
            <p id="lowStockItems" class="stat-number">0</p>
          </div>
        </div>

        <div class="chart-card" style="margin-top:24px; background:#fff; padding:16px; border-radius:8px; box-shadow:0 1px 4px rgba(0,0,0,0.08);">
          <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:8px;flex-wrap:wrap;">
            <div style="display:flex;align-items:center;gap:8px;">
              <h3 id="salesChartTitle" style="margin:0;">Sales (last 6 months)</h3>
              <span style="font-size:12px;color:#666;">Amount in INR</span>
            </div>
            <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;">
              <label style="font-size:12px;color:#444;display:flex;align-items:center;gap:4px;">
                Group
                <select id="salesGroupingSelect" style="padding:4px 8px;border:1px solid #ccc;border-radius:4px;font-size:12px;">
                  <option value="day" selected>Day</option>
                  <option value="month">Month</option>
                </select>
              </label>
              <label style="font-size:12px;color:#444;display:flex;align-items:center;gap:4px;">
                Range
                <select id="salesRangeSelect" style="padding:4px 8px;border:1px solid #ccc;border-radius:4px;font-size:12px;">
                  <option value="7">Last 7 days</option>
                  <option value="14" selected>Last 14 days</option>
                  <option value="30">Last 30 days</option>
                </select>
              </label>
              <label style="font-size:12px;color:#444;display:flex;align-items:center;gap:4px;">
                View
                <select id="salesChartTypeSelect" style="padding:4px 8px;border:1px solid #ccc;border-radius:4px;font-size:12px;">
                  <option value="bar" selected>Bar</option>
                  <option value="line">Line</option>
                </select>
              </label>
            </div>
          </div>
          <canvas id="salesChart" height="120"></canvas>
        </div>
      </section>

      <!-- Products Section -->
      <section id="products" class="admin-section">
        <div class="section-header">
          <h2>Manage Products</h2>
          <button class="btn btn-primary" onclick="showAddProductForm()">+ Add New Product</button>
        </div>

        <!-- Add/Edit Product Form -->
        <div id="productForm" class="form-container" style="display: none;">
          <h3 id="formTitle">Add New Product</h3>
          <form onsubmit="handleProductSubmit(event)">
            <input type="hidden" id="productId">

            <div class="form-group">
              <label for="productName">Product Name</label>
              <input type="text" id="productName" required placeholder="e.g., Surgical Gloves">
            </div>

            <div class="form-group">
              <label for="productDescription">Description</label>
              <textarea id="productDescription" rows="3" required placeholder="Product description"></textarea>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="productPrice">Price (â‚¹)</label>
                <input type="number" id="productPrice" required min="0" step="0.01">
              </div>

              <div class="form-group">
                <label for="productStock">Stock Quantity</label>
                <input type="number" id="productStock" required min="0">
              </div>
            </div>

            <div class="form-group">
              <label for="productCategory">Category</label>
              <select id="productCategory" required>
                <option value="">Select Category</option>
                <option value="surgical-gloves">Surgical Gloves</option>
                <option value="masks">Masks</option>
                <option value="syringes">Syringes</option>
                <option value="bandages">Bandages</option>
                <option value="sterilization">Sterilization</option>
                <option value="instruments">Instruments</option>
                <option value="protective-wear">Protective Wear</option>
              </select>
            </div>

            <div class="form-group">
              <label for="productImage">Product Image</label>
              <input type="file" id="productImage" accept="image/*">
              <div id="imagePreview" style="margin-top: 10px;"></div>
            </div>

            <div id="formError" class="error-message"></div>

            <div class="form-buttons">
              <button type="submit" class="btn btn-primary">Save Product</button>
              <button type="button" class="btn btn-secondary" onclick="hideAddProductForm()">Cancel</button>
            </div>
          </form>
        </div>

        <!-- Products List -->
        <div class="products-table-container">
          <table class="products-table">
            <thead>
              <tr>
                <th>Image</th>
                <th>Name</th>
                <th>Category</th>
                <th>Price</th>
                <th>Stock</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="productsTableBody">
              <tr>
                <td colspan="6" class="text-center">Loading products...</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- Orders Section -->
      <section id="orders" class="admin-section">
        <h2>Manage Orders</h2>
        <div class="orders-table-container">
          <table class="orders-table">
            <thead>
              <tr>
                <th>Order ID</th>
                <th>Customer</th>
                <th>Total</th>
                <th>Status</th>
                <th>Date</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="ordersTableBody">
              <tr>
                <td colspan="6" class="text-center">Loading orders...</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>
    </main>
  </div>

  <!-- Order Details Modal -->
  <div class="modal" id="orderModal">
    <div class="modal-content modal-lg">
      <div class="modal-header">
        <h2>Order Details</h2>
        <button class="close-btn" onclick="closeOrderModal()">&times;</button>
      </div>
      <div class="modal-body" id="orderDetailsContent">
        <!-- Order details will be loaded here -->
      </div>
    </div>
  </div>

  <script src="js/config.js"></script>
  <script src="js/api.js"></script>
  <script src="js/admin.js"></script>
</body>
</html>
